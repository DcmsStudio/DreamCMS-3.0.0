tinymce.PluginManager.add("contentgrid",function(c){function k(a){return a&&"string"===typeof h[a]?"<p> </p>"+h[a].replace(/xxx0/g,'<div class="c"><p>Column</p></div>').replace(/"contentcols"/g,'"contentcols" data-options="'+a+'"')+"<p> </p>":""}var h={5050:'<div class="contentcols"><div class="c50">xxx0</div><div class="c50">xxx0</div></div>',3366:'<div class="contentcols"><div class="c33">xxx0</div><div class="c66">xxx0</div></div>',6633:'<div class="contentcols"><div class="c66">xxx0</div><div class="c33">xxx0</div></div>',
	3862:'<div class="contentcols"><div class="c38">xxx0</div><div class="c62">xxx0</div></div>',6238:'<div class="contentcols"><div class="c62">xxx0</div><div class="c38">xxx0</div></div>',2575:'<div class="contentcols"><div class="c25">xxx0</div><div class="c75">xxx0</div></div>',7525:'<div class="contentcols"><div class="c75">xxx0</div><div class="c25">xxx0</div></div>',333333:'<div class="contentcols"><div class="c33">xxx0</div><div class="c33">xxx0</div><div class="c33">xxx0</div></div>',25252525:'<div class="contentcols"><div class="c25">xxx0</div><div class="c25">xxx0</div><div class="c25">xxx0</div><div class="c25">xxx0</div></div>',
	2020202020:'<div class="contentcols"><div class="c20">xxx0</div><div class="c20">xxx0</div><div class="c20">xxx0</div><div class="c20">xxx0</div><div class="c20">xxx0</div></div>',255025:'<div class="contentcols"><div class="c25">xxx0</div><div class="c50">xxx0</div><div class="c25">xxx0</div></div>',252550:'<div class="contentcols"><div class="c25">xxx0</div><div class="c25">xxx0</div><div class="c50">xxx0</div></div>',502525:'<div class="contentcols"><div class="c50">xxx0</div><div class="c25">xxx0</div><div class="c25">xxx0</div></div>',
	8020:'<div class="contentcols"><div class="c80">xxx0</div><div class="c20">xxx0</div></div>',2080:'<div class="contentcols"><div class="c20">xxx0</div><div class="c80">xxx0</div></div>'};c.on("init",function(){(new tinymce.dom.StyleSheetLoader(document)).load(tinyMCE.baseURL+"/plugins/contentgrid/css/content.css")});var g=!1;c.on("NodeChange",function(a){g=!1;a.element&&(g=c.dom.getParents(a.element,"div.contentcols").length?c.dom.getParents(a.element,"div.contentcols")[0].getAttribute("data-options"):
	!1)});c.addButton("contentgrid",function(){function a(e,b){f.push({text:{raw:e},value:b})}var f=[];a("50 x 50","5050");a("33 x 66","3366");a("66 x 33","6633");a("38 x 62","3862");a("62 x 38","6238");a("25 x 75","2575");a("75 x 25","7525");a("20 x 80","2080");a("80 x 20","8020");a("33 x 33 x 33","333333");a("25 x 50 x 25","255025");a("25 x 25 x 50","252550");a("50 x 25 x 25","502525");a("25 x 25 x 25 x 25","25252525");a("20 x 20 x 20 x 20 x 20","2020202020");return{type:"panelbutton",text:"",tooltip:"Content Grid",
	fixedWidth:!0,height:200,autofix:!1,role:"contentgrid",stateSelector:["div[class=contentcols]"],onclick:function(e){var b=c.selection.getNode();e.control&&e.control.panel&&e.control.panel._id&&c.dom.getParents(b,"div.contentcols").length&&(b=c.dom.getParents(b,"div.contentcols")[0].getAttribute("data-options"),new tinymce.dom.DomQuery(e.control),e=$("div#"+e.control.panel._id),$("div.contentgrid-cols",e).removeClass("sel"),e=$("div[rel="+b+"]",e),e.length&&e.addClass("sel"))},panel:{role:"application",
		autohide:!1,html:function(){var e=tinyMCE.baseURL+"/plugins/contentgrid/img/",b;b='<div style="height: 300px;width: 486px"><span class="contentgrid-desc">Press Ctrl or Command if you will insert into a selected Column Container. If you not use Ctrl or Command then will replace the existing Column Container.</span>';for(var a=0;a<f.length;a++){var c="";g&&g==f[a].value&&(c+=" sel");b+='<div class="contentgrid-cols'+c+'" rel="'+f[a].value+'"><img width="150" height="74" src="'+e+"contentgrid-"+f[a].value+
			'.png" style="vertical-align:middle;" /></div>'}return b+"</div>"},onclick:function(a){var b=c.dom.getParent(a.target,"div");if(b&&b.getAttribute("rel")){var f=b.getAttribute("rel"),d=k(f),b=c.selection.getNode();c.dom.getParents(b,"div.contentcols").length&&!a.metaKey?(b=c.dom.getParents(b,"div.contentcols"),c.selection.select(b[0]),a=$(b[0]).clone(),a=$(b[0]).find("div.c").children(),a.each(function(){"Column"==$(this).get(0).innerHTML&&$(this).remove()}),d=$(d),d.find("div.c:first").empty().append(a),
			d=$("<span></span>").append(d),d=d.get(0).innerHTML,$(b[0]).replaceWith(d),c.undoManager.transact(function(){c.setContent(c.getContent({raw:!0}))}),c.nodeChanged()):b&&'<br data-mce-bogus="1">'!=b.innerHTML&&f?(c.selection.select(b),a=$(b).clone(),a.each(function(){"Column"==$(this).get(0).innerHTML&&$(this).remove()}),d=$(d),d.find("div.c:first p").empty().append(a),d=$("<span></span>").append(d),d=d.get(0).innerHTML,$(b).replaceWith(d),c.undoManager.transact(function(){c.setContent(c.getContent({raw:!0}))}),
			c.nodeChanged()):c.execCommand("mceInsertContent",!0,d);this.hide()}}}}})});