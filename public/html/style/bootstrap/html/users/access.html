<cp:extends template="../main"/><cp:block name="toolbar">    [save:uaccess]    [save_exit:uaccess]    [reset:uaccess]    <cp:if condition="!$has_specialperms">        <button id="reset-access" class="reset-access" style="display:none"><span></span> {trans('Spezielle Rechte entfernen')}</button>    </cp:if>    <cp:else>        <button id="reset-access" class="reset-access"><span></span> {trans('Spezielle Rechte entfernen')}</button>    </cp:else>    [cancel:uaccess]</cp:block><cp:block name="content"><form action="admin.php" id="uaccess" method="post" name="uaccess">    <input type="hidden" name="send" value="1"/>    <input type="hidden" name="adm" value="user"/>    <input type="hidden" name="action" value="access"/>    <input type="hidden" name="userid" value="{$users}"/>    <div class="box">        <p><strong>{trans('Spezielle Rechte für Benutzer')}</strong></p>        <div class="box-inner">            <cp:if condition="$multiusers">                {trans('Den Benutzern <strong>%s</strong> werden diese Rechte zugewiesen. Diese Rechte gelten unabhängig der Benutzergruppe!', $usernames)}                <p class="warn">                    {trans('Sollten Sie mehrere Benutzer gleichzeitg bearbeiten und für einen der gewählten Benutzer schon Spezielle Rechte vergeben wurden, werden diese überschrieben!')}                </p>            </cp:if>            <cp:else>                {trans('Dem Benutzern <strong>%s</strong> werden diese Rechte zugewiesen. Diese Rechte sind unabhängig der Benutzergruppen Einstellungen!', $usernames)}            </cp:else>        </div>    </div>    <div style="margin-top:10px;margin-bottom:0">        <cp:jstabs tabs="$tab_titles" default="{$defaulttab}" usetrans="true"/>    </div>    <div style="margin-top:0;width:100%;display:inline-block">        {$tab_containers}        {*        <cp:loop name="tabdata" key="a">            <div id="tc{$a.a_index}">                <div class="panel panel-default">                    <div class="panel-heading">                        {$a.label}                    </div>                    <div class="panel-body">                        <cp:set var="x" value="1"/>                        <cp:set var="rowopen" value="0"/>                        <cp:loop name="a.data" key="rs">                            <cp:if condition="$x == 1">                                <cp:set var="rowopen" value="1"/>                                <cp:tag name="div" class="row"/>                            </cp:if>                            <cp:if condition="$rs.type == 'textarea'">                                <cp:if condition="$rowopen && $x > 1">                                    <cp:tag name="div" forceclose="true"/>                                    <div class="row" id="{$rs.fieldname}" rel="{$rs.require}">                                        <div class="col-md-12">                                            <label>{$rs.label}</label>                                            {$rs.field}                                            <span cp:is="$rs.description" class="note">{$rs.description}</span>                                        </div>                                    </div>                                    <cp:set var="x" value="$x + 1"/>                                </cp:if>                                <cp:else>                                    <div class="col-md-12" id="{$rs.fieldname}" rel="{$rs.require}">                                        <label>{$rs.label}</label>                                        {$rs.field}                                        <span cp:is="$rs.description" class="note">{$rs.description}</span>                                    </div>                                    <cp:set var="x" value="$x + 1"/>                                </cp:else>                            </cp:if>                            <cp:else>                                <div class="col-md-6" id="{$rs.fieldname}" rel="{$rs.require}">                                    <label>{$rs.label}</label>                                    {$rs.field}                                    <span cp:is="$rs.description" class="note">{$rs.description}</span>                                </div>                            </cp:else>                            <cp:if condition="$x == 2 || ($rowopen && !$rs.next_rs.fieldname) ">                                <cp:tag name="div" forceclose="true"/>                                <cp:set var="rowopen" value="0"/>                                <cp:set var="x" value="0"/>                            </cp:if>                            <cp:set var="x" value="$x + 1"/>                        </cp:loop>                    </div>                </div>            </div>        </cp:loop>*}    </div></form><script type="text/javascript">    Form.registerForm( 'uaccess', {        contentIdentifierID: 'group-id',        exiturl: 'admin.php?adm=users',        runAfterSubmit: showRemoveAccess    } );    $( '#' + Win.windowID ).find( 'fieldset' ).css({marginBottom: '3px'})    initUserPerms( true );    setTimeout( function ()    {        $( '#' + Win.windowID ).find( '.reset-access' ).on( 'click', function ()        {            jConfirm( "{trans('Möchtest du die speziellen Rechte des Benutzers wirklich entfernen?')}", "{trans('Bestätigung...')}", function ( r )            {                if ( r ) {                    $.get( 'admin.php?adm=user&action=access&userid={$users}&removespecial=1', {}, function ( data )                    {                        if ( Tools.responseIsOk( data ) ) {                            $( '#' + Win.windowID ).find( '#reset-access' ).hide();                            Notifier.display( 'warn', data.msg );                        }                        else {                            jAlert( data.msg );                        }                    } );                }            } );        } );    }, 500 );    if ( typeof showRemoveAccess == 'undefined' ) {        function showRemoveAccess()        {            $( '#' + Win.windowID ).find( '#reset-access' ).show();        }    }    /*     _win.find('[rel]').each(function() {     var self = this;     var keyname = '';     if ( $(this).parents('.box-inner:first').length == 0 )     {     Debug.log('Undefined Perm key was found');     }     else     {     keyname = $(this).parents('.box-inner:first').attr('perm');     }     var require = $(this).attr('rel');     var selected = _win.find('[name="'+keyname + Tools.escapeJqueryRegex('['+ require+']') +'"]');     if ( selected.length > 1 )     {     jAlert('Document contains more as one element of: '+ require);     return;     }     else if ( selected.length == 1 )     {     if ( $('#'+keyname +'-'+require+'_container').length == 0 )     {     var div = $('<div/>').attr('id', keyname +'-'+ require +'_container' ).addClass('subitems-container');     div.insertAfter( $(selected).parent() );     $(selected).change(function() {     if ( $(this).is(':checked') )     {     $('#'+ keyname +'-'+require+'_container').show();     }     else     {     $('#'+ keyname +'-'+require+'_container').hide();     }     });     selected.css({marginTop: '5px'});     selected.parent().next('div').css({'marin-bottom': '20px', 'width': 'auto', 'display': 'block'});     }     $(this).appendTo($('#'+ keyname +'-'+ require +'_container'));     if ( $('#'+ keyname +'-'+ require).is(':checked') )     {     $('#'+ keyname +'-'+require+'_container').show();     }     else     {     $('#'+ keyname +'-'+require+'_container').hide();     }     }     });     $('div.subitems-container', _win).css({marginLeft: '10px', marinBottom: '20px', 'paddingLeft': '10px', 'border-left': '1px solid #c0c0c0'});     _win.find('div.subitems-container :first-child fieldset').css({marginLeft: '20px', marinBottom: '10px', 'clear': 'both'});     $('<br/>').insertAfter( _win.find('label').css({'cursor': 'pointer'}) );     */</script></cp:block>