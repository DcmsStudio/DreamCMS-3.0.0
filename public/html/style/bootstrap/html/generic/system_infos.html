<cp:extends template="../main"/>

<cp:block name="toolbar">

</cp:block>

<cp:block name="content">
    <cp:jstabs tabs="trans('System Information'),trans('Server Tasks'),trans('PHP Konstanten'),trans('PHP Info')" default="trans('System Information')" usetrans="true"/>

    <div class="tcontent" id="tc0">


        <div class="panel">
            <div class="panel-heading">
                <h3>{trans('Webserver Details')}</h3>
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-6">
                        <table cellpadding="3" cellspacing="0" border="0" width="100%" class="table table-striped table-hover">
                            <tr>
                                <td width="40%"><b>{trans('Name')}:</b></td>
                                <td>{$srv.server_software}</td>
                            </tr>
                            <tr>
                                <td><b>{trans('WebServer to PHP interface')}:</b></td>
                                <td>{$srv.php_sapi_name}</td>
                            </tr>

                            <tr>
                                <td><b>DreamCMS Version:</b></td>
                                <td>{$srv.dreamcmsversion}</td>
                            </tr>

                            <tr>
                                <td><b>jQuery Version:</b></td>
                                <td id="jQuery-V">
                                    <script language="javascript">
                                        <cp:literal type="cdata_comment">
                                            setTimeout(function(){ $('#jQuery-V').text( $().jquery ); }, 500);
                                        </cp:literal>
                                    </script>
                                </td>
                            </tr>
                            <tr>
                                <td><b>jQuery-UI Version:</b></td>
                                <td id="jQueryUI-V">
                                    <script language="javascript">
                                        <cp:literal type="cdata_comment">
                                            setTimeout(function(){ $('#jQueryUI-V').text( $.ui.version );}, 500);
                                        </cp:literal>
                                    </script>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-md-6">
                        <table cellpadding="3" cellspacing="0" border="0" width="100%" class="table table-striped table-hover">
                            <tr>
                                <td width="30%"><b>{trans('PHP Version')}:</b></td>
                                <td>{$srv.php_version}</td>
                            </tr>
                            <tr>
                                <td><b>{trans('Server Uptime')}:</b></td>
                                <td>{$srv.os.server_uptime}<br/>
                                    {trans('Server ist online seit dem')}: {$srv.os.server_uptime_date}
                                </td>
                            </tr>

                            <tr>
                                <td><b>jQuery Version:</b></td>
                                <td>{$srv.jquery_version}</td>
                            </tr>
                            <tr>
                                <td><b>Open basedir:</b></td>
                                <td>{$srv.basedir}</td>
                            </tr>
                        </table>
                    </div>
                </div>


            </div>
        </div>

        <div class="panel">
            <div class="panel-heading">
                <h3>{trans('Betriebssytem Details')}</h3>
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-6">
                        <table cellpadding="3" cellspacing="0" border="0" width="100%" class="table table-striped table-hover">
                            <tr>
                                <td width="40%"><b>{trans('Betriebssystem')}:</b></td>
                                <td>{$srv.os.distribution}</td>
                            </tr>
                            <tr>
                                <td><b>{trans('Kernel')}:</b></td>
                                <td>{$srv.os.kernel}</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>



        <div class="panel">
            <div class="panel-heading">
                <h3>{trans('CPU Details')}</h3>
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-6">
                        <table cellpadding="3" cellspacing="0" border="0" width="100%" class="table table-striped table-hover">
                            <tr>
                                <td width="50%"><b>{trans('Prozessortyp')}:</b></td>
                                <td>{$srv.cpuname}</td>
                            </tr>
                            <tr>
                                <td><b>{trans('Gesamtanzahl der Kerne')}:</b></td>
                                <td>{$srv.totalcores}</td>
                            </tr>

                            <tr>
                                <td><b>{trans('LoadAvg')}:</b></td>
                                <td>
                                    {trans('%s letzte Minute', $srv.LoadAvg.1min)}<br/>
                                    {trans('%s letzen 5 Minuten', $srv.LoadAvg.5min)}<br/>
                                    {trans('%s letzen 15 Minuten', $srv.LoadAvg.15min)}
                                </td>
                            </tr>

                        </table>
                    </div>
                    <div class="col-md-6">
                        <table cellpadding="3" cellspacing="0" border="0" width="100%" class="table table-striped table-hover">
                            <tr>
                                <td width="50%"><b>{trans('Prozessorgeschwindigkeit')}:</b></td>
                                <td>{$srv.cpuspeed} {trans('Mhz')}</td>
                            </tr>
                            <tr>
                                <td><b>{trans('L2-Cache (pro Kern)')}:</b></td>
                                <td>{$srv.L2Cache}</td>
                            </tr>
                            <tr>
                                <td><b>{trans('L3-Cache')}:</b></td>
                                <td>{$srv.L3Cache}</td>
                            </tr>
                            <tr>
                                <td><b>{trans('Busgeschwindigkeit')}:</b></td>
                                <td>{$srv.BusSpeed} {trans('Mhz')}</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>



        <div class="panel">
            <div class="panel-heading">
                <h3>{trans('Speicher')}</h3>
            </div>
            <div class="panel-body">
                <div class="row">

                    <div class="col-md-6">
                        <table cellpadding="3" cellspacing="0" border="0" width="100%" class="table table-striped table-hover">
                            <tr>
                                <td width="50%"><b>{trans('Verfügbarer Ram')}:</b></td>
                                <td>{$srv.ram.total}</td>
                            </tr>
                            <tr>
                                <td><b>{trans('Freier Ram')}:</b></td>
                                <td>{$srv.ram.free} ({$srv.ram.freepercent}%)</td>
                            </tr>

                            <tr>
                                <td><b>{trans('benutzter Ram')}:</b></td>
                                <td>{$srv.ram.used} ({$srv.ram.usedpercent}%)</td>
                            </tr>

                        </table>
                    </div>

                    <div class="col-md-6">
                        <table cellpadding="3" cellspacing="0" border="0" width="100%" class="table table-striped table-hover">
                            <tr>
                                <td width="50%"><b>{trans('Festplatten Speicherplatz')}:</b></td>
                                <td>{$srv.disk_space}</td>
                            </tr>
                            <tr>
                                <td><b>{trans('Benutzter Speicherplatz')}:</b></td>
                                <td>{$srv.inuse_space} ({$srv.inuse_space_percent})</td>
                            </tr>
                            <tr>
                                <td><b>{trans('Freier Speicherplatz')}:</b></td>
                                <td>{$srv.disk_space_free} ({$srv.free_space_percent})</td>
                            </tr>
                        </table>
                    </div>

                    <div class="col-md-6">
                        <table cellpadding="3" cellspacing="0" border="0" width="100%" class="table table-striped table-hover">
                            <tr>
                                <td width="50%"><b>{trans('Verfügbarer Swap')}:</b></td>
                                <td>{$srv.swap.total}</td>
                            </tr>
                            <tr>
                                <td><b>{trans('Freier Swap')}:</b></td>
                                <td>{$srv.swap.free} ({$srv.swap.freepercent}%)</td>
                            </tr>

                            <tr>
                                <td><b>{trans('benutzter Swap')}:</b></td>
                                <td>{$srv.swap.used} ({$srv.swap.usedpercent}%)</td>
                            </tr>
                        </table>
                    </div>

                </div>
            </div>
        </div>


        <div class="panel">
            <div class="panel-heading">
                <h3>{trans('Datenbank')}</h3>
            </div>
            <div class="panel-body">
                <div class="row">

                    <div class="col-md-6">
                        <table cellpadding="3" cellspacing="0" border="0" width="100%" class="table table-striped table-hover">
                            <tr>
                                <td width="50%"><b>{trans('Datenbank Software')}:</b></td>
                                <td>{$srv.sql_type}</td>
                            </tr>
                            <tr>
                                <td><b>{trans('Datenbank Version')}:</b></td>
                                <td>{$srv.sql_version}</td>
                            </tr>
                        </table>
                    </div>

                </div>
            </div>
        </div>







    </div>

    <div class="tcontent" id="tc1">

        <div class="panel">
            <div class="panel-heading">
                <h3>{trans('Server Tasks')}</h3>
            </div>
            <div class="panel-body">
                <div style="overflow:hidden;overflow-x: auto">
                    <pre>{$tasks}
                    </pre>
                </div>
            </div>
        </div>


    </div>

    <div class="tcontent" id="tc2">

        <div class="panel">
            <div class="panel-heading">
                <h3>{trans('Definierte PHP Konstante')}</h3>
            </div>
            <div class="panel-body">
                <table cellpadding="3" cellspacing="0" border="0" width="100%" class="table table-striped table-hover" >

                    <cp:loop name="constants" key="r">
                        <tr>
                            <td width="30%"><b>{$r.name}:</b></td>
                            <td>{$r.value}</td>
                        </tr>
                    </cp:loop>

                </table>
            </div>
        </div>


    </div>



    <div class="tcontent" id="tc3">
        <cp:loop name="phpinfo" key="r">

            <div class="panel">
                <div class="panel-heading">
                    <h3>{$r.header}</h3>
                </div>
                <div cp:is="count($r.data)" class="panel-body">


                    <table cellpadding="3" cellspacing="0" border="0" width="100%" class="table table-striped table-hover">
                        <cp:loop name="r.data" key="rs">

                            <tr>
                            <cp:if condition="$rs.key">
                                <td width="25%"><b>{$rs.key}:</b></td>
                                <td width="75%"><pre>{wordwrap($rs.value, 120)}</pre></td>
                            </cp:if>
                            <cp:else>
                                <td colspan="2"><pre>{wordwrap($rs.value, 120)}</pre></td>
                            </cp:else>
                            </tr>
                        </cp:loop>
                    </table>

                </div>
            </div>
        </cp:loop>

    </div>


    <script>
        $('#'+ Win.windowID).addClass('sys-infos');
    </script>



</cp:block>
